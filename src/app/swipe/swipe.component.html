<div class="swipe-container">
  <div class="header">
    <div class="logo-container">
      <img
        src="assets/icons/full_tastematch.png"
        alt="TasteMatch"
        class="logo"
      />
    </div>
    <img
      [src]="
        showFilters
          ? 'assets/icons/filter_highlighted.png'
          : 'assets/icons/filter.png'
      "
      alt="Filter"
      class="filter-icon"
      (click)="openFilters()"
    />
  </div>

  <div
    #card
    class="card"
    [class.shrunk]="isInfoExpanded"
    [style.transform]="cardTransform"
    (touchstart)="onTouchStart($event)"
    (touchmove)="onTouchMove($event)"
    (touchend)="onTouchEnd($event)"
    (mousedown)="onMouseDown($event)"
    (mousemove)="onMouseMove($event)"
    (mouseup)="onMouseUp($event)"
    (mouseleave)="onMouseUp($event)"
  >
    <div
      class="restaurant-image"
      [style.backgroundImage]="
        'url(' + currentRestaurant.images[currentImageIndex] + ')'
      "
    >
      <div class="image-navigation">
        <div class="nav-area left" (click)="previousImage($event)"></div>
        <div class="nav-area right" (click)="nextImage($event)"></div>
      </div>

      <div class="image-indicators">
        <div class="indicator-container">
          <div
            *ngFor="let image of currentRestaurant.images; let i = index"
            class="indicator"
            [class.active]="i === currentImageIndex"
          ></div>
        </div>
      </div>

      <div class="restaurant-info">
        <div class="restaurant-header">
          <div class="info-button" (click)="toggleInfo()">
            <img src="assets/icons/info.png" alt="info" class="info-icon" />
          </div>
          <div class="info-content" [class.hidden]="isInfoExpanded">
            <h2>{{ currentRestaurant.name }}</h2>
            <div class="rating">
              <img src="assets/icons/star.png" alt="rating" class="star-icon" />
              <img src="assets/icons/star.png" alt="rating" class="star-icon" />
              <img src="assets/icons/star.png" alt="rating" class="star-icon" />
              <img src="assets/icons/star.png" alt="rating" class="star-icon" />
              <span class="rating-value">{{ currentRestaurant.rating }}</span>
              <span class="cuisine">{{ currentRestaurant.cuisine }}</span>
            </div>
          </div>
        </div>
        <div class="distance" [class.hidden]="isInfoExpanded">
          <img
            src="assets/icons/location.png"
            alt="location"
            class="location-icon"
          />
          <span>{{ currentRestaurant.distance }} kilometer away</span>
        </div>
      </div>

      <img
        src="assets/icons/like_text.png"
        alt="LIKE"
        class="reaction-text like-text"
        [class.visible]="showLikeText"
      />
      <img
        src="assets/icons/nope_text.png"
        alt="NOPE"
        class="reaction-text dislike-text"
        [class.visible]="showDislikeText"
      />
    </div>

    <div class="action-buttons">
      <button class="action-btn" (click)="dislike()">
        <img
          [src]="
            isDislikeHighlighted
              ? 'assets/icons/cross_highlighted.png'
              : 'assets/icons/cross.png'
          "
          alt="dislike"
          class="action-icon"
        />
      </button>
      <button class="action-btn" (click)="undo()">
        <img src="assets/icons/undo.png" alt="undo" class="action-icon" />
      </button>
      <button class="action-btn">
        <img
          src="assets/icons/favorite.png"
          alt="favorite"
          class="action-icon"
        />
      </button>
      <button class="action-btn" (click)="like()">
        <img
          [src]="
            isLikeHighlighted
              ? 'assets/icons/like_highlighted.png'
              : 'assets/icons/like.png'
          "
          alt="like"
          class="action-icon"
        />
      </button>
    </div>
  </div>

  <div class="comments-section" [class.expanded]="isInfoExpanded">
    <div class="comments-content">
      <div class="restaurant-details">
        <h2>{{ currentRestaurant.name }} <span class="rating">{{ currentRestaurant.rating }}</span></h2>
        <p class="address">{{ currentRestaurant.address }}</p>
        
        <div class="tags">
          <span class="tag">{{ currentRestaurant.cuisine }}</span>
          <span class="tag">Gluten-free</span>
          <span class="tag">Vegetarian</span>
        </div>
        
        <div class="price">€€ Average price</div>
        
        <p class="description">Upscale brasserie in a hotel serving elevated starters, mains & desserts, plus wine & cocktails.</p>
        
        <div class="comments-header">
          <h3>Some Comments</h3>
          <button class="add-review" (click)="openReview()">Add review</button>
        </div>
        
        <div class="comments-list">
          <div class="comment">
            <div class="user-avatar">
              <img src="assets/icons/default_user.png" alt="User" />
            </div>
            <div class="comment-content">
              <div class="comment-header">
                <span class="user-name">Julien</span>
                <div class="rating">★★★★★ <span>5.0</span></div>
                <img src="assets/icons/google.png" alt="Google" class="platform-icon">
              </div>
              <p class="comment-text">Top !! I recommend the restaurant</p>
            </div>
          </div>

          <div class="comment">
            <div class="user-avatar">
              <img src="assets/icons/default_user.png" alt="User" />
            </div>
            <div class="comment-content">
              <div class="comment-header">
                <span class="user-name">Sophie</span>
                <div class="rating">★★★★★ <span>5.0</span></div>
                <img src="assets/icons/tastematch.png" alt="TasteMatch" class="platform-icon">
              </div>
              <p class="comment-text">Amazing experience! The food was delicious and the service impeccable.</p>
            </div>
          </div>

          <div class="comment">
            <div class="user-avatar">
              <img src="assets/icons/default_user.png" alt="User" />
            </div>
            <div class="comment-content">
              <div class="comment-header">
                <span class="user-name">Marc</span>
                <div class="rating">★★★★ <span>4.0</span></div>
                <img src="assets/icons/google.png" alt="Google" class="platform-icon">
              </div>
              <p class="comment-text">Great atmosphere and excellent wine selection. A bit pricey but worth it.</p>
            </div>
          </div>

          <div class="comment">
            <div class="user-avatar">
              <img src="assets/icons/default_user.png" alt="User" />
            </div>
            <div class="comment-content">
              <div class="comment-header">
                <span class="user-name">Emma</span>
                <div class="rating">★★★★★ <span>5.0</span></div>
                <img src="assets/icons/tastematch.png" alt="TasteMatch" class="platform-icon">
              </div>
              <p class="comment-text">Perfect for special occasions. The tasting menu was exceptional!</p>
            </div>
          </div>

          <div class="comment">
            <div class="user-avatar">
              <img src="assets/icons/default_user.png" alt="User" />
            </div>
            <div class="comment-content">
              <div class="comment-header">
                <span class="user-name">Thomas</span>
                <div class="rating">★★★★★ <span>5.0</span></div>
                <img src="assets/icons/google.png" alt="Google" class="platform-icon">
              </div>
              <p class="comment-text">One of the best French restaurants in Paris. The desserts are to die for!</p>
            </div>
          </div>

          <div class="comment">
            <div class="user-avatar">
              <img src="assets/icons/default_user.png" alt="User" />
            </div>
            <div class="comment-content">
              <div class="comment-header">
                <span class="user-name">Marie</span>
                <div class="rating">★★★★ <span>4.0</span></div>
                <img src="assets/icons/tastematch.png" alt="TasteMatch" class="platform-icon">
              </div>
              <p class="comment-text">Beautiful setting and great service. The foie gras was particularly good.</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <app-navbar></app-navbar>

  <app-filters
    *ngIf="showFilters"
    (closeFilters)="closeFilters()"
  ></app-filters>
</div>
